!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("axios"),require("unist-util-select")):"function"==typeof define&&define.amd?define(["exports","axios","unist-util-select"],r):r((e=e||self)["@agentofuser/remark-oembed"]={},e.axios,e.unistUtilSelect)}(this,function(e,r,t){"use strict";function n(){return(n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}r=r&&r.hasOwnProperty("default")?r.default:r,"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o=function(e,n){try{return Promise.resolve(function(){try{return Promise.resolve(r.get("https://oembed.com/providers.json")).then(function(e){return e.data})}catch(e){return Promise.reject(e)}}()).then(function(r){var n=function(e,r){void 0===r&&(r=!1);var n=[];return!0===r?t.selectAll(e,"inlineCode").forEach(function(e){if(e.value.startsWith("oembed:")){var r=e;r.url=r.value.substring(7).trim(),n.push(r)}}):n=t.selectAll("paragraph link:only-child",e),n||[]}(e,!1);return Promise.resolve(Promise.all(n.map(function(e){return i(e,r)}))).then(function(){return e})})}catch(e){return Promise.reject(e)}},i=function(e,t){void 0===t&&(t=[]);try{var o=e,i=function(i,a){try{var u=function(){var i=function(e,r){var t={url:null,params:null},o=r||[],i=Array.isArray(o),a=0;for(o=i?o:o[Symbol.iterator]();;){var u;if(i){if(a>=o.length)break;u=o[a++]}else{if((a=o.next()).done)break;u=a.value}var l=u,s=l.endpoints||[],c=Array.isArray(s),f=0;for(s=c?s:s[Symbol.iterator]();;){var m;if(c){if(f>=s.length)break;m=s[f++]}else{if((f=s.next()).done)break;m=f.value}var h=m,y=h.schemes||[],d=Array.isArray(y),v=0;for(y=d?y:y[Symbol.iterator]();;){var p;if(d){if(v>=y.length)break;p=y[v++]}else{if((v=y.next()).done)break;p=v.value}var b=p;b=b.replace("*",".*"),new RegExp(b).test(e)&&(t.url=h.url,t.params=n({url:e},l.params))}}}return t}(e.url,t),a=function(){if(i.url)return Promise.resolve(function(e){try{return Promise.resolve(r.get(e.url,{params:n({format:"json"},e.params)})).then(function(e){return e.data})}catch(e){return Promise.reject(e)}}(i)).then(function(r){o=function(e,r){return r.html?(e.type="html",e.value=r.html,delete e.children):"photo"===r.type&&(e.type="html",e.value='\n      <img src="'+r.url+'"\n        class="gatsby-remark-oembed-photo"\n        width="'+r.width+'"\n        height="'+r.width+'"\n        title="'+r.title+'"/>\n    ',delete e.children),e}(e,r)})}();if(a&&a.then)return a.then(function(){})}()}catch(e){return a(e)}return u&&u.then?u.then(void 0,a):u}(0,function(r){throw r.url=e.url,r});return Promise.resolve(i&&i.then?i.then(function(e){return o}):o)}catch(e){return Promise.reject(e)}};e.default=function(){return o}});
//# sourceMappingURL=agentofuserremark-oembed.umd.production.js.map
