import r from"axios";import{selectAll as e}from"unist-util-select";function t(){return(t=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var n=function(t,n){try{return Promise.resolve(function(){try{return Promise.resolve(r.get("https://oembed.com/providers.json")).then(function(r){return r.data})}catch(r){return Promise.reject(r)}}()).then(function(r){var n=function(r,t){void 0===t&&(t=!1);var n=[];return!0===t?e(r,"inlineCode").forEach(function(r){if(r.value.startsWith("oembed:")){var e=r;e.url=e.value.substring(7).trim(),n.push(e)}}):n=e("paragraph link:only-child",r),n||[]}(t,!1);return Promise.resolve(Promise.all(n.map(function(e){return o(e,r)}))).then(function(){return t})})}catch(r){return Promise.reject(r)}},o=function(e,n){void 0===n&&(n=[]);try{var o=e,i=function(i,a){try{var u=function(){var i=function(r,e){var n={url:null,params:null},o=e||[],i=Array.isArray(o),a=0;for(o=i?o:o[Symbol.iterator]();;){var u;if(i){if(a>=o.length)break;u=o[a++]}else{if((a=o.next()).done)break;u=a.value}var l=u,s=l.endpoints||[],c=Array.isArray(s),f=0;for(s=c?s:s[Symbol.iterator]();;){var m;if(c){if(f>=s.length)break;m=s[f++]}else{if((f=s.next()).done)break;m=f.value}var h=m,y=h.schemes||[],v=Array.isArray(y),p=0;for(y=v?y:y[Symbol.iterator]();;){var d;if(v){if(p>=y.length)break;d=y[p++]}else{if((p=y.next()).done)break;d=p.value}var b=d;b=b.replace("*",".*"),new RegExp(b).test(r)&&(n.url=h.url,n.params=t({url:r},l.params))}}}return n}(e.url,n),a=function(){if(i.url)return Promise.resolve(function(e){try{return Promise.resolve(r.get(e.url,{params:t({format:"json"},e.params)})).then(function(r){return r.data})}catch(r){return Promise.reject(r)}}(i)).then(function(r){o=function(r,e){return e.html?(r.type="html",r.value=e.html,delete r.children):"photo"===e.type&&(r.type="html",r.value='\n      <img src="'+e.url+'"\n        class="gatsby-remark-oembed-photo"\n        width="'+e.width+'"\n        height="'+e.width+'"\n        title="'+e.title+'"/>\n    ',delete r.children),r}(e,r)})}();if(a&&a.then)return a.then(function(){})}()}catch(r){return a(r)}return u&&u.then?u.then(void 0,a):u}(0,function(r){throw r.url=e.url,r});return Promise.resolve(i&&i.then?i.then(function(r){return o}):o)}catch(r){return Promise.reject(r)}};export default function(){return n}
//# sourceMappingURL=agentofuserremark-oembed.es.production.js.map
